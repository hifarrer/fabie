<section class="grid" style="max-width: 560px; margin: 0 auto;">
  <% if (!role) { %>
    <!-- Role Selection -->
    <div class="card">
      <div class="pad">
        <div style="text-align: center; margin-bottom: 24px;">
          <div class="kicker" style="justify-content: center;">Join FABIE</div>
          <h1 class="h2" style="margin-top: 10px;">Create Your Account</h1>
          <p class="p">Choose how you want to use the marketplace</p>
        </div>

        <div class="grid cols-2" style="gap: 16px;">
          <a class="card" href="/auth/register?role=buyer" style="text-align: center;">
            <div class="pad">
              <div class="icon" style="margin: 0 auto 12px;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="9" cy="21" r="1"/>
                  <circle cx="20" cy="21" r="1"/>
                  <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
                </svg>
              </div>
              <div class="h3">I'm a Buyer</div>
              <p class="p" style="font-size: 13px; margin-top: 8px;">
                Search for materials, parts, equipment, and services from verified suppliers.
              </p>
            </div>
          </a>

          <a class="card" href="/auth/register?role=seller" style="text-align: center;">
            <div class="pad">
              <div class="icon" style="margin: 0 auto 12px; background: rgba(34, 197, 94, 0.15); border-color: rgba(34, 197, 94, 0.3);">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                  <path d="M2 17l10 5 10-5"/>
                  <path d="M2 12l10 5 10-5"/>
                </svg>
              </div>
              <div class="h3">I'm a Seller</div>
              <p class="p" style="font-size: 13px; margin-top: 8px;">
                List your products and services, manage DPPs, and connect with buyers.
              </p>
            </div>
          </a>
        </div>

        <div style="text-align: center; margin-top: 24px; padding-top: 24px; border-top: 1px solid var(--border);">
          <p class="p">Already have an account? <a href="/auth/login" style="color: var(--brand);">Sign in</a></p>
        </div>
      </div>
    </div>
  <% } else { %>
    <!-- Registration Form -->
    <div class="card">
      <div class="pad">
        <div style="text-align: center; margin-bottom: 24px;">
          <div class="kicker" style="justify-content: center;">
            <% if (role === 'seller') { %>
              <span style="color: var(--brand2);">Seller Account</span>
            <% } else { %>
              <span style="color: var(--brand);">Buyer Account</span>
            <% } %>
          </div>
          <h1 class="h2" style="margin-top: 10px;">Create Your Account</h1>
          <p class="p">
            <% if (role === 'seller') { %>
              Start selling on the FABIE marketplace
            <% } else { %>
              Discover manufacturing suppliers
            <% } %>
          </p>
        </div>

        <% if (error) { %>
          <div class="notice" style="border-color: var(--danger); margin-bottom: 16px;">
            <strong style="color: var(--danger);">Error:</strong> <%= error %>
          </div>
        <% } %>

        <form action="/auth/register" method="POST">
          <input type="hidden" name="role" value="<%= role %>" />

          <div class="form-section-title">Personal Information</div>
          
          <div class="field" style="margin-bottom: 16px;">
            <label for="name">Full Name *</label>
            <input 
              type="text" 
              id="name" 
              name="name" 
              class="input" 
              required 
              placeholder="John Smith"
            />
          </div>

          <div class="field" style="margin-bottom: 16px;">
            <label for="email">Email Address *</label>
            <input 
              type="email" 
              id="email" 
              name="email" 
              class="input" 
              required 
              placeholder="john@company.com"
              autocomplete="email"
            />
          </div>

          <div class="form-grid cols-2" style="margin-bottom: 16px;">
            <div class="field">
              <label for="password">Password *</label>
              <input 
                type="password" 
                id="password" 
                name="password" 
                class="input" 
                required 
                placeholder="Min 6 characters"
                minlength="6"
                autocomplete="new-password"
              />
            </div>
            <div class="field">
              <label for="confirmPassword">Confirm Password *</label>
              <input 
                type="password" 
                id="confirmPassword" 
                name="confirmPassword" 
                class="input" 
                required 
                placeholder="Repeat password"
                minlength="6"
                autocomplete="new-password"
              />
            </div>
          </div>

          <div class="form-section-title" style="margin-top: 24px;">Company Information</div>

          <div class="field" style="margin-bottom: 16px;">
            <label for="company">Company Name <% if (role === 'seller') { %>*<% } %></label>
            <input 
              type="text" 
              id="company" 
              name="company" 
              class="input" 
              placeholder="Your Company Inc."
              <%= role === 'seller' ? 'required' : '' %>
            />
          </div>

          <div class="form-grid cols-2" style="margin-bottom: 16px;">
            <div class="field">
              <label for="location">Location</label>
              <input 
                type="text" 
                id="location" 
                name="location" 
                class="input" 
                placeholder="City, Province"
              />
            </div>
            <div class="field">
              <label for="phone">Phone Number</label>
              <input 
                type="tel" 
                id="phone" 
                name="phone" 
                class="input" 
                placeholder="(555) 123-4567"
              />
            </div>
          </div>

          <button type="submit" class="btn <%= role === 'seller' ? 'good' : 'primary' %> block" style="margin-top: 24px;">
            Create <%= role === 'seller' ? 'Seller' : 'Buyer' %> Account
          </button>
        </form>

        <div style="text-align: center; margin-top: 24px; padding-top: 24px; border-top: 1px solid var(--border);">
          <p class="p">
            <a href="/auth/register" style="color: var(--muted);">← Choose different account type</a>
            &nbsp;•&nbsp;
            <a href="/auth/login" style="color: var(--brand);">Sign in instead</a>
          </p>
        </div>
      </div>
    </div>
  <% } %>
</section>


