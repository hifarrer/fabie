<section class="card hero">
  <div class="pad">
    <div class="kicker">AI-Powered • Ontario Manufacturing • Discovery Platform</div>
    <h1 class="h1">AI-Powered Manufacturing Marketplace</h1>
    <p class="p" style="max-width: 820px">
      Digital Product Passports (DPPs), NAFTA/CUSMA content visibility, and intelligent matching —
      so buyers find what they need <em>and</em> what they should be considering.
    </p>

    <div class="row" style="margin-top: 18px; align-items: center">
      <div style="flex: 1">
        <form action="/marketplace" method="GET">
          <label for="homeSearch">Search the marketplace</label>
          <input
            id="homeSearch"
            name="q"
            class="input"
            placeholder='Try: "321 stainless 1500F exhaust" or "waterjet cutting"'
          />
        </form>
        <div class="notice" style="margin-top: 12px">
          <strong>MVP Demo:</strong> This is a functional proof-of-concept with 15 seeded listings,
          NAFTA calculation, and rule-based AI recommendations.
        </div>
      </div>
      <div style="width: 280px">
        <a class="btn primary block" href="/auth/register" style="font-size: 16px; padding: 14px 24px;">Register Now</a>
      </div>
    </div>

    <div class="grid cols-3" style="margin-top: 18px">
      <div class="card">
        <div class="pad">
          <div class="mini">
            <div class="icon" aria-hidden="true">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                <path d="M10 14a2 2 0 1 0 4 0a2 2 0 0 0-4 0Z" stroke="currentColor" stroke-width="2" />
                <path d="M12 2v4" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                <path d="M21 9h-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                <path d="M7 9H3" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                <path d="M19.07 4.93l-2.83 2.83" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                <path d="M6.76 7.76L3.93 4.93" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                <path d="M12 22v-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
              </svg>
            </div>
            <div>
              <div class="h3">Discovery Marketplace</div>
              <p class="p">Search & filter equipment, materials, parts, and services.</p>
            </div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="pad">
          <div class="mini">
            <div class="icon" aria-hidden="true">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                <path d="M7 3h10a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2Z" stroke="currentColor" stroke-width="2" />
                <path d="M8 7h8" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                <path d="M8 11h8" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                <path d="M8 15h5" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
              </svg>
            </div>
            <div>
              <div class="h3">Digital Product Passports</div>
              <p class="p">Structured listings with specs, docs, and verification tiers.</p>
            </div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="pad">
          <div class="mini">
            <div class="icon" aria-hidden="true">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                <path d="M12 1v22" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                <path d="M5 5h14" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                <path d="M5 19h14" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                <path d="M7 9h10" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                <path d="M7 15h10" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
              </svg>
            </div>
            <div>
              <div class="h3">NAFTA/CUSMA Tracking</div>
              <p class="p">Input-by-input origin tracking and RVC calculation.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<% if (featuredListings && featuredListings.length > 0) { %>
<section style="margin-top: 24px">
  <div class="h2">Featured Listings</div>
  <div class="grid cols-3">
    <% featuredListings.forEach(dpp => { %>
    <a class="card" href="/dpp/<%= dpp.id %>">
      <div class="pad">
        <div class="cardHeader">
          <div>
            <div class="h3"><%= dpp.name %></div>
            <p class="p"><%= dpp.seller?.name %> • <%= dpp.seller?.location %></p>
          </div>
          <% if (dpp.verification?.tier === 'fully_verified') { %>
            <span class="badge verified">Fully Verified</span>
          <% } else if (dpp.verification?.tier === 'document_supported') { %>
            <span class="badge warn">Document-Supported</span>
          <% } else { %>
            <span class="badge basic">Basic</span>
          <% } %>
        </div>
        <div class="p" style="margin-top: 10px">
          <%= dpp.assetType.replace('_', ' ').replace(/\b\w/g, l => l.toUpperCase()) %>
          <% if (dpp.specs?.material) { %> • <%= dpp.specs.material %><% } %>
        </div>
        <div class="row" style="margin-top: 12px; align-items: center; justify-content: space-between">
          <% if (dpp.nafta?.qualifies) { %>
            <span class="badge verified">NAFTA: Qualifies</span>
          <% } else { %>
            <span class="badge"><%= dpp.views || 0 %> views</span>
          <% } %>
          <span class="badge">
            <%= dpp.pricing?.currency || 'CAD' %> $<%= dpp.pricing?.basePrice?.toFixed(2) || '0.00' %>
            <% if (dpp.pricing?.unit) { %>/ <%= dpp.pricing.unit %><% } %>
          </span>
        </div>
      </div>
    </a>
    <% }); %>
  </div>
</section>
<% } %>


